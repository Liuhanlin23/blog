<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 8.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="_ rocketmq-spring-boot-starter åŸºäº RocketMQ åŸç”Ÿ Java å®¢æˆ·ç«¯è¿›è¡Œå°è£…ï¼Œé€šè¿‡è‡ªåŠ¨è£…é…ã€YAML é…ç½®ç»‘å®šä¸ @RocketMQMessageListener ç­‰æ³¨è§£ï¼Œç®€åŒ–æ¶ˆæ¯çš„å‘é€ã€æ¶ˆè´¹ä¸äº‹åŠ¡å¤„ç†ã€‚  _ ä¸€. å¼•å…¥ä¾èµ–12345&lt;dependency&gt;     &lt;groupId&gt;org.apache.rocketmq&lt;&#x2F;">
<meta property="og:type" content="article">
<meta property="og:title" content="Springboot rocket å®æˆ˜">
<meta property="og:url" content="http://example.com/RocketMQ/RocketMQ/Springboot_rocket_%E5%AE%9E%E6%88%98/index.html">
<meta property="og:site_name" content="åˆ˜ç¿°éœ–">
<meta property="og:description" content="_ rocketmq-spring-boot-starter åŸºäº RocketMQ åŸç”Ÿ Java å®¢æˆ·ç«¯è¿›è¡Œå°è£…ï¼Œé€šè¿‡è‡ªåŠ¨è£…é…ã€YAML é…ç½®ç»‘å®šä¸ @RocketMQMessageListener ç­‰æ³¨è§£ï¼Œç®€åŒ–æ¶ˆæ¯çš„å‘é€ã€æ¶ˆè´¹ä¸äº‹åŠ¡å¤„ç†ã€‚  _ ä¸€. å¼•å…¥ä¾èµ–12345&lt;dependency&gt;     &lt;groupId&gt;org.apache.rocketmq&lt;&#x2F;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-11-25T13:31:54.319Z">
<meta property="article:modified_time" content="2025-11-25T13:40:26.826Z">
<meta property="article:author" content="åˆ˜ç¿°éœ–">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/RocketMQ/RocketMQ/Springboot_rocket_%E5%AE%9E%E6%88%98/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/RocketMQ/RocketMQ/Springboot_rocket_%E5%AE%9E%E6%88%98/","path":"RocketMQ/RocketMQ/Springboot_rocket_å®æˆ˜/","title":"Springboot rocket å®æˆ˜"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Springboot rocket å®æˆ˜ | åˆ˜ç¿°éœ–</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  




<meta name="referrer" content="no-referrer">

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">åˆ˜ç¿°éœ–</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="nav-number">1.</span> <span class="nav-text">ä¸€. å¼•å…¥ä¾èµ–</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C-%E9%85%8D%E7%BD%AEapplication-yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">äºŒ.é…ç½®application.ymlé…ç½®æ–‡ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89-%E5%8F%91%E9%80%81%E4%B8%8E%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF"><span class="nav-number">2.1.</span> <span class="nav-text">ä¸‰.å‘é€ä¸æ¥æ”¶æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rocketmq%E7%9A%84%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.2.</span> <span class="nav-text">rocketmqçš„æ¶ˆæ¯ç±»å‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rocketmq%E7%9A%84%E4%B8%89%E7%A7%8D%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.3.</span> <span class="nav-text">rocketmqçš„ä¸‰ç§æ¶ˆæ¯å‘é€ç±»å‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFtags%E5%92%8Ckey"><span class="nav-number">2.4.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯tagså’Œkey</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#rocketmq%E6%B6%88%E6%81%AF%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%EF%BC%8C%E6%AF%8F%E4%B8%80%E6%9D%A1message%E9%83%BD%E5%8C%85%E5%90%AB%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7"><span class="nav-number">2.4.1.</span> <span class="nav-text">rocketmqæ¶ˆæ¯çš„åŸºæœ¬ç»“æ„ï¼Œæ¯ä¸€æ¡messageéƒ½åŒ…å«å‡ ä¸ªå¸¸è§å±æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tag%E6%A0%87%E7%AD%BE"><span class="nav-number">2.4.2.</span> <span class="nav-text">Tagæ ‡ç­¾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#key"><span class="nav-number">2.4.3.</span> <span class="nav-text">key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90"><span class="nav-number">2.4.4.</span> <span class="nav-text">å¯¹æ¯”åˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E6%B6%88%E6%81%AF"><span class="nav-number">2.5.</span> <span class="nav-text">æ™®é€šæ¶ˆæ¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E5%8F%91%E9%80%81"><span class="nav-number">2.5.1.</span> <span class="nav-text">åŒæ­¥å‘é€</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E5%8F%91%E9%80%81%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%AF%B9%E8%B1%A1%E9%83%BD%E5%8F%AF%EF%BC%89"><span class="nav-number">2.5.1.1.</span> <span class="nav-text">åŸºç¡€å‘é€ï¼ˆå­—ç¬¦ä¸²&#x2F;å¯¹è±¡éƒ½å¯ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A6%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%EF%BC%88%E5%8D%95%E4%BD%8D%EF%BC%9A%E6%AF%AB%E7%A7%92%EF%BC%89"><span class="nav-number">2.5.1.2.</span> <span class="nav-text">å¸¦è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E5%B8%A6-Tag-%E7%9A%84%E6%B6%88%E6%81%AF"><span class="nav-number">2.5.1.3.</span> <span class="nav-text">å‘é€å¸¦ Tag çš„æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E5%B8%A6-Key-%E7%9A%84%E6%B6%88%E6%81%AF%EF%BC%88%E6%96%B9%E4%BE%BF%E8%BF%BD%E8%B8%AA%EF%BC%89"><span class="nav-number">2.5.1.4.</span> <span class="nav-text">å‘é€å¸¦ Key çš„æ¶ˆæ¯ï¼ˆæ–¹ä¾¿è¿½è¸ªï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E5%8F%91%E9%80%81%EF%BC%88%E5%A4%9A%E6%9D%A1%E5%90%88%E5%B9%B6%E4%B8%80%E6%AC%A1%E5%8F%91%E9%80%81%EF%BC%89"><span class="nav-number">2.5.1.5.</span> <span class="nav-text">æ‰¹é‡å‘é€ï¼ˆå¤šæ¡åˆå¹¶ä¸€æ¬¡å‘é€ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E5%8F%91%E9%80%81"><span class="nav-number">2.5.1.6.</span> <span class="nav-text">å¼‚æ­¥å‘é€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E5%90%91%E5%8F%91%E5%B8%83"><span class="nav-number">2.5.1.7.</span> <span class="nav-text">å•å‘å‘å¸ƒ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%91%E5%B8%83"><span class="nav-number">2.5.1.8.</span> <span class="nav-text">è‡ªå®šä¹‰å‘å¸ƒ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%97%E6%B6%88%E6%81%AF%EF%BC%88%E6%B6%88%E8%B4%B9%E7%AB%AF%EF%BC%89"><span class="nav-number">2.5.2.</span> <span class="nav-text">æ¥å—æ¶ˆæ¯ï¼ˆæ¶ˆè´¹ç«¯ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6%E5%B8%A6-Tag-%E7%9A%84%E6%B6%88%E6%81%AF"><span class="nav-number">2.5.2.1.</span> <span class="nav-text">æ¥æ”¶å¸¦ Tag çš„æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6%E5%AF%B9%E8%B1%A1%E6%B6%88%E6%81%AF"><span class="nav-number">2.5.2.2.</span> <span class="nav-text">æ¥æ”¶å¯¹è±¡æ¶ˆæ¯</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E6%9B%B4%E5%A4%9A%E7%BB%86%E8%8A%82"><span class="nav-number">2.5.3.</span> <span class="nav-text">ç›‘å¬æ›´å¤šç»†èŠ‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%B6%88%E8%B4%B9%E8%80%85%E7%BB%84%E5%90%8D%EF%BC%9F"><span class="nav-number">2.5.4.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯æ¶ˆè´¹è€…ç»„åï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%BC%8F%E5%8C%BA%E5%88%AB"><span class="nav-number">2.5.5.</span> <span class="nav-text">æ¶ˆè´¹æ¨¡å¼åŒºåˆ«</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%BA%E5%BA%8F%E6%B6%88%E6%81%AF"><span class="nav-number">2.6.</span> <span class="nav-text">é¡ºåºæ¶ˆæ¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%89%B9%E6%80%A7"><span class="nav-number">2.6.1.</span> <span class="nav-text">âœ… åœºæ™¯ä¸ç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sharding-key-%E5%92%8C-message-key"><span class="nav-number">2.6.2.</span> <span class="nav-text">sharding key å’Œ message key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%BA%E5%BA%8F%E5%8F%91%E9%80%81%EF%BC%88%E5%90%8C%E6%AD%A5%EF%BC%89"><span class="nav-number">2.6.3.</span> <span class="nav-text">é¡ºåºå‘é€ï¼ˆåŒæ­¥ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%BA%E5%BA%8F%E5%8F%91%E9%80%81%EF%BC%88%E5%BC%82%E6%AD%A5%EF%BC%89"><span class="nav-number">2.6.4.</span> <span class="nav-text">é¡ºåºå‘é€ï¼ˆå¼‚æ­¥ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%B6%E6%97%B6%E6%B6%88%E6%81%AF"><span class="nav-number">2.7.</span> <span class="nav-text">å»¶æ—¶æ¶ˆæ¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%89%B9%E6%80%A7-1"><span class="nav-number">2.7.1.</span> <span class="nav-text">âœ… åœºæ™¯ä¸ç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%B6%E6%97%B6%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%EF%BC%88%E5%90%8C%E6%AD%A5%EF%BC%89"><span class="nav-number">2.7.2.</span> <span class="nav-text">å»¶æ—¶æ¶ˆæ¯å‘é€ï¼ˆåŒæ­¥ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E5%BB%B6%E6%97%B6%E6%B6%88%E6%81%AF"><span class="nav-number">2.7.3.</span> <span class="nav-text">å¼‚æ­¥å»¶æ—¶æ¶ˆæ¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%B6%88%E6%81%AF"><span class="nav-number">2.8.</span> <span class="nav-text">äº‹åŠ¡æ¶ˆæ¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%89%B9%E6%80%A7-2"><span class="nav-number">2.8.1.</span> <span class="nav-text">âœ… åœºæ™¯ä¸ç‰¹æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E4%BA%8B%E5%8A%A1%E6%B6%88%E6%81%AF"><span class="nav-number">2.8.2.</span> <span class="nav-text">å‘é€äº‹åŠ¡æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E6%89%A7%E8%A1%8C%E4%B8%8E%E5%9B%9E%E6%9F%A5"><span class="nav-number">2.8.3.</span> <span class="nav-text">æœ¬åœ°äº‹åŠ¡æ‰§è¡Œä¸å›æŸ¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E7%9B%91%E5%90%AC%E5%99%A8%EF%BC%88%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%EF%BC%89"><span class="nav-number">2.8.4.</span> <span class="nav-text">äº‹åŠ¡ç›‘å¬å™¨ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%97%E6%B6%88%E6%81%AF%EF%BC%8C%E6%B6%88%E8%B4%B9%E7%AB%AF%EF%BC%88%E5%92%8C%E6%99%AE%E9%80%9A%E6%B6%88%E6%81%AF%E4%B8%80%E6%A0%B7%EF%BC%89"><span class="nav-number">2.8.5.</span> <span class="nav-text">æ¥å—æ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯ï¼ˆå’Œæ™®é€šæ¶ˆæ¯ä¸€æ ·ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E7%8A%B6%E6%80%81%E6%9E%9A%E4%B8%BE"><span class="nav-number">2.8.6.</span> <span class="nav-text">äº‹åŠ¡çŠ¶æ€æšä¸¾</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">åˆ˜ç¿°éœ–</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">102</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/RocketMQ/RocketMQ/Springboot_rocket_%E5%AE%9E%E6%88%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="åˆ˜ç¿°éœ–">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åˆ˜ç¿°éœ–">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Springboot rocket å®æˆ˜ | åˆ˜ç¿°éœ–">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Springboot rocket å®æˆ˜
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/RocketMQ/" itemprop="url" rel="index"><span itemprop="name">RocketMQ</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>_ rocketmq-spring-boot-starter åŸºäº RocketMQ åŸç”Ÿ Java å®¢æˆ·ç«¯è¿›è¡Œå°è£…ï¼Œé€šè¿‡è‡ªåŠ¨è£…é…ã€YAML é…ç½®ç»‘å®šä¸ @RocketMQMessageListener ç­‰æ³¨è§£ï¼Œç®€åŒ–æ¶ˆæ¯çš„å‘é€ã€æ¶ˆè´¹ä¸äº‹åŠ¡å¤„ç†ã€‚  _</p>
<h1 id="ä¸€-å¼•å…¥ä¾èµ–"><a href="#ä¸€-å¼•å…¥ä¾èµ–" class="headerlink" title="ä¸€. å¼•å…¥ä¾èµ–"></a>ä¸€. å¼•å…¥ä¾èµ–</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="code">     &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;</span></span><br><span class="line"><span class="code">     &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;/artifactId&gt;</span></span><br><span class="line"><span class="code">     &lt;version&gt;2.3.0&lt;/version&gt;</span></span><br><span class="line"><span class="code">   &lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="äºŒ-é…ç½®application-ymlé…ç½®æ–‡ä»¶"><a href="#äºŒ-é…ç½®application-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="äºŒ.é…ç½®application.ymlé…ç½®æ–‡ä»¶"></a>äºŒ.é…ç½®application.ymlé…ç½®æ–‡ä»¶</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># name-server ip + port</span><br><span class="line">  name-server: 127.0.0.1:9876</span><br><span class="line">  producer:</span><br><span class="line"># ç”Ÿäº§è€…ç»„å</span><br><span class="line">    group: demo-producer-group</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰-å‘é€ä¸æ¥æ”¶æ¶ˆæ¯"><a href="#ä¸‰-å‘é€ä¸æ¥æ”¶æ¶ˆæ¯" class="headerlink" title="ä¸‰.å‘é€ä¸æ¥æ”¶æ¶ˆæ¯"></a>ä¸‰.å‘é€ä¸æ¥æ”¶æ¶ˆæ¯</h2><h2 id="rocketmqçš„æ¶ˆæ¯ç±»å‹"><a href="#rocketmqçš„æ¶ˆæ¯ç±»å‹" class="headerlink" title="rocketmqçš„æ¶ˆæ¯ç±»å‹"></a>rocketmqçš„æ¶ˆæ¯ç±»å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>åç§°</th>
<th>åœºæ™¯</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>1. æ™®é€šæ¶ˆæ¯ï¼ˆNormal Messageï¼‰</strong></td>
<td>æœ€å¸¸è§</td>
<td>æ™®é€šçš„å¼‚æ­¥é€šä¿¡ï¼Œå¦‚è®¢å•åˆ›å»ºé€šçŸ¥</td>
<td>ä¸ä¿è¯é¡ºåºï¼Œæœ€çµæ´»</td>
</tr>
<tr>
<td><strong>2. é¡ºåºæ¶ˆæ¯ï¼ˆOrdered Messageï¼‰</strong></td>
<td>ä¿è¯åŒä¸€ä¸šåŠ¡ Key çš„é¡ºåº</td>
<td>è®¢å•çŠ¶æ€å˜æ›´ï¼ˆä¸‹å•â†’æ”¯ä»˜â†’å‘è´§ï¼‰</td>
<td>æŒ‰ hashKey æœ‰åº</td>
</tr>
<tr>
<td><strong>3. å»¶æ—¶æ¶ˆæ¯ï¼ˆDelayed Messageï¼‰</strong></td>
<td>å»¶è¿Ÿæ¶ˆè´¹</td>
<td>æ”¯ä»˜è¶…æ—¶å–æ¶ˆè®¢å•ã€å»¶è¿ŸçŸ­ä¿¡é€šçŸ¥</td>
<td>RocketMQ å†…ç½®å»¶è¿Ÿç­‰çº§</td>
</tr>
<tr>
<td><strong>4. äº‹åŠ¡æ¶ˆæ¯ï¼ˆTransactional Messageï¼‰</strong></td>
<td>åˆ†å¸ƒå¼äº‹åŠ¡</td>
<td>ä¸‹å•æˆåŠŸâ†’æ‰£åº“å­˜ä¸€è‡´æ€§</td>
<td>æ”¯æŒå›æŸ¥æœºåˆ¶ï¼Œç¡®ä¿æœ€ç»ˆä¸€è‡´æ€§</td>
</tr>
</tbody></table>
<h2 id="rocketmqçš„ä¸‰ç§æ¶ˆæ¯å‘é€ç±»å‹"><a href="#rocketmqçš„ä¸‰ç§æ¶ˆæ¯å‘é€ç±»å‹" class="headerlink" title="rocketmqçš„ä¸‰ç§æ¶ˆæ¯å‘é€ç±»å‹"></a>rocketmqçš„ä¸‰ç§æ¶ˆæ¯å‘é€ç±»å‹</h2><table>
<thead>
<tr>
<th>å‘é€æ–¹å¼</th>
<th>æ˜¯å¦ç­‰å¾…å“åº”</th>
<th>æ˜¯å¦æœ‰å›è°ƒ</th>
<th>å¯é æ€§</th>
<th>æ€§èƒ½</th>
<th>å…¸å‹åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>åŒæ­¥å‘é€</strong></td>
<td>âœ… ç­‰å¾… Broker ç¡®è®¤</td>
<td>âŒ æ— å›è°ƒ</td>
<td>âœ… æœ€é«˜</td>
<td>ğŸš€ ä¸­</td>
<td>æ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚ä¸‹å•ã€æ”¯ä»˜ï¼‰</td>
</tr>
<tr>
<td><strong>å¼‚æ­¥å‘é€</strong></td>
<td>âœ… åå°ç­‰å¾…ã€å›è°ƒé€šçŸ¥</td>
<td>âœ… æœ‰å›è°ƒ</td>
<td>âœ… è¾ƒé«˜</td>
<td>ğŸš€ğŸš€ è¾ƒé«˜</td>
<td>å¼‚æ­¥é€šçŸ¥ã€çŸ­ä¿¡ã€æ¨é€</td>
</tr>
<tr>
<td><strong>å•å‘å‘é€</strong></td>
<td>âŒ ä¸ç­‰å¾…ã€ä¸ç¡®è®¤</td>
<td>âŒ æ— å›è°ƒ</td>
<td>âŒ æœ€ä½</td>
<td>ğŸš€ğŸš€ğŸš€ æœ€é«˜</td>
<td>æ—¥å¿—ä¸ŠæŠ¥ã€åŸ‹ç‚¹ç»Ÿè®¡</td>
</tr>
</tbody></table>
<ol>
<li>åŒæ­¥å‘é€ï¼š ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åï¼Œä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç­‰å¾… Broker è¿”å› <code>SendResult</code>ï¼ˆåŒ…å«å‘é€çŠ¶æ€ã€æ¶ˆæ¯ IDã€è½å…¥é˜Ÿåˆ—ç­‰ä¿¡æ¯ï¼‰ã€‚<br>åªæœ‰å½“ Broker ç¡®è®¤æ¶ˆæ¯å·²ç»æˆåŠŸå†™å…¥é˜Ÿåˆ—ï¼Œç”Ÿäº§è€…æ‰è®¤ä¸ºè¿™æ¡æ¶ˆæ¯å‘é€æˆåŠŸã€‚  </li>
<li>å¼‚æ­¥å‘é€ï¼šç”Ÿäº§è€…è°ƒç”¨å‘é€æ–¹æ³•åç«‹å³è¿”å›ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚<br>RocketMQ ä¼šåœ¨åå°ç½‘ç»œçº¿ç¨‹ä¸­ç­‰å¾… Broker å“åº”ï¼Œå¹¶é€šè¿‡å›è°ƒï¼ˆ<code>SendCallback</code>ï¼‰é€šçŸ¥ç»“æœï¼š</li>
</ol>
<ul>
<li><code>onSuccess(SendResult)</code>ï¼šå‘é€æˆåŠŸï¼›</li>
<li><code>onException(Throwable)</code>ï¼šå‘é€å¤±è´¥ã€‚</li>
</ul>
<ol start="3">
<li>å•å‘å‘é€ï¼š ç”Ÿäº§è€…åªè´Ÿè´£å‘é€æ¶ˆæ¯ï¼Œä¸ç­‰å¾… Broker å“åº”ï¼Œä¹Ÿæ²¡æœ‰å›è°ƒæˆ–ç¡®è®¤æœºåˆ¶ã€‚<br>æ¶ˆæ¯æ˜¯å¦æˆåŠŸå‘é€ã€æ˜¯å¦å†™å…¥é˜Ÿåˆ—ï¼Œç”Ÿäº§è€…å®Œå…¨ä¸å…³å¿ƒã€‚</li>
</ol>
<h2 id="ä»€ä¹ˆæ˜¯tagså’Œkey"><a href="#ä»€ä¹ˆæ˜¯tagså’Œkey" class="headerlink" title="ä»€ä¹ˆæ˜¯tagså’Œkey"></a>ä»€ä¹ˆæ˜¯tagså’Œkey</h2><h3 id="rocketmqæ¶ˆæ¯çš„åŸºæœ¬ç»“æ„ï¼Œæ¯ä¸€æ¡messageéƒ½åŒ…å«å‡ ä¸ªå¸¸è§å±æ€§"><a href="#rocketmqæ¶ˆæ¯çš„åŸºæœ¬ç»“æ„ï¼Œæ¯ä¸€æ¡messageéƒ½åŒ…å«å‡ ä¸ªå¸¸è§å±æ€§" class="headerlink" title="rocketmqæ¶ˆæ¯çš„åŸºæœ¬ç»“æ„ï¼Œæ¯ä¸€æ¡messageéƒ½åŒ…å«å‡ ä¸ªå¸¸è§å±æ€§"></a>rocketmqæ¶ˆæ¯çš„åŸºæœ¬ç»“æ„ï¼Œæ¯ä¸€æ¡messageéƒ½åŒ…å«å‡ ä¸ªå¸¸è§å±æ€§</h3><table>
<thead>
<tr>
<th>å±æ€§</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>Topic</code></td>
<td>æ¶ˆæ¯çš„ä¸»é¢˜ï¼Œç”¨æ¥åŒºåˆ†ä¸šåŠ¡ç±»å‹ï¼Œæ¯”å¦‚â€œç”¨æˆ·æ³¨å†Œâ€ã€â€œè®¢å•æ”¯ä»˜â€ç­‰ã€‚</td>
</tr>
<tr>
<td><code>Tag</code></td>
<td>ä¸»é¢˜ä¸‹çš„å­åˆ†ç±»ï¼Œç”¨æ¥è¿›ä¸€æ­¥ç­›é€‰æ¶ˆæ¯ã€‚</td>
</tr>
<tr>
<td><code>Key</code></td>
<td>æ¶ˆæ¯çš„å”¯ä¸€ä¸šåŠ¡æ ‡è¯†ï¼Œç”¨æ¥å®šä½å’Œæ’æŸ¥é—®é¢˜ã€‚</td>
</tr>
<tr>
<td><code>Body</code></td>
<td>çœŸæ­£çš„æ¶ˆæ¯å†…å®¹ï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ã€‚</td>
</tr>
</tbody></table>
<h3 id="Tagæ ‡ç­¾"><a href="#Tagæ ‡ç­¾" class="headerlink" title="Tagæ ‡ç­¾"></a>Tagæ ‡ç­¾</h3><p>   ä½œç”¨ï¼šåœ¨åŒä¸€ä¸ª Topic ä¸‹å†è¿›è¡Œä¸€æ¬¡é€»è¾‘åˆ†ç±»ã€‚  </p>
<p> æ¯”å¦‚ï¼š  </p>
<p>Topic: OrderTopic</p>
<p>Tag: CREATEã€PAYã€CANCEL</p>
<br/>

<p> æ¶ˆè´¹è€…å¯ä»¥é€šè¿‡è®¢é˜…æ—¶æŒ‡å®š Tagï¼š  </p>
<p>consumer.subscribe(â€œOrderTopicâ€, â€œCREATE || PAYâ€);</p>
<br/>

<p>è¡¨ç¤ºåªæ¥æ”¶è®¢å•åˆ›å»ºå’Œæ”¯ä»˜çš„æ¶ˆæ¯ï¼Œè€Œå–æ¶ˆç±»æ¶ˆæ¯ï¼ˆ<code>CANCEL</code>ï¼‰ä¼šè¢«è¿‡æ»¤æ‰ã€‚</p>
<p>âœ… è¿‡æ»¤æ˜¯åœ¨ <strong>Broker ç«¯å®Œæˆçš„</strong>ï¼Œæ‰€ä»¥èƒ½å‡è½»æ¶ˆè´¹è€…çš„è´Ÿæ‹…ã€‚</p>
<p>ğŸ‘‰ <strong>æ€»ç»“ä¸€å¥è¯ï¼š</strong></p>
<p>Tag æ˜¯ Topic ä¸‹çš„â€œäºŒçº§åˆ†ç±»â€ï¼Œç”¨æ¥åš<strong>æ¶ˆæ¯è¿‡æ»¤å’Œéš”ç¦»ä¸åŒä¸šåŠ¡äº‹ä»¶</strong>ã€‚</p>
<h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><p> ä½œç”¨ï¼šç»™æ¯æ¡æ¶ˆæ¯æ‰“ä¸Šä¸€ä¸ªèƒ½å”¯ä¸€å®šä½ä¸šåŠ¡çš„æ ‡è¯†ã€‚  </p>
<p> æ¯”å¦‚ï¼š  </p>
<p>Message msg &#x3D; new Message(â€œOrderTopicâ€, â€œCREATEâ€, â€œorderId_12345â€, body);</p>
<br/>

<p>å¸¸ç”¨äºï¼š</p>
<ul>
<li>æ’æŸ¥æŸæ¡æ¶ˆæ¯æ˜¯å¦æˆåŠŸå‘é€ï¼›</li>
<li>å®šä½ä¸¢å¤±ã€é‡å¤çš„æ¶ˆæ¯ï¼›</li>
<li>å¿«é€Ÿåœ¨æ§åˆ¶å°æœç´¢ã€‚</li>
</ul>
<p>ğŸ‘‰ <strong>æ€»ç»“ä¸€å¥è¯ï¼š</strong></p>
<p>Key æ˜¯æ¶ˆæ¯çš„â€œå”¯ä¸€ä¸šåŠ¡ç´¢å¼•â€ï¼Œæ–¹ä¾¿<strong>æ’æŸ¥ä¸è¿½è¸ªæ¶ˆæ¯</strong>ã€‚</p>
<h3 id="å¯¹æ¯”åˆ†æ"><a href="#å¯¹æ¯”åˆ†æ" class="headerlink" title="å¯¹æ¯”åˆ†æ"></a>å¯¹æ¯”åˆ†æ</h3><table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>Tag</th>
<th>Key</th>
</tr>
</thead>
<tbody><tr>
<td>å±‚çº§</td>
<td>äºŒçº§åˆ†ç±»ï¼ˆé™„å±äº Topicï¼‰</td>
<td>å”¯ä¸€æ ‡è¯†ï¼ˆé’ˆå¯¹å•æ¡æ¶ˆæ¯ï¼‰</td>
</tr>
<tr>
<td>ä½œç”¨</td>
<td>æ¶ˆæ¯è¿‡æ»¤</td>
<td>æ¶ˆæ¯è¿½è¸ªã€é—®é¢˜å®šä½</td>
</tr>
<tr>
<td>ä½ç½®</td>
<td>æ¶ˆæ¯å¤´å±æ€§</td>
<td>æ¶ˆæ¯å¤´å±æ€§</td>
</tr>
<tr>
<td>æ¶ˆè´¹è¿‡æ»¤</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>ç¤ºä¾‹</td>
<td>â€œPAYâ€ã€â€CANCELâ€</td>
<td>â€œorderId_12345â€</td>
</tr>
</tbody></table>
<h2 id="æ™®é€šæ¶ˆæ¯"><a href="#æ™®é€šæ¶ˆæ¯" class="headerlink" title="æ™®é€šæ¶ˆæ¯"></a>æ™®é€šæ¶ˆæ¯</h2><h3 id="åŒæ­¥å‘é€"><a href="#åŒæ­¥å‘é€" class="headerlink" title="åŒæ­¥å‘é€"></a>åŒæ­¥å‘é€</h3><p> âœ… æœ€å¸¸ç”¨ã€æœ€å¯é  â€”â€” ç­‰å¾… Broker è¿”å›ç¡®è®¤ç»“æœã€‚  </p>
<h4 id="åŸºç¡€å‘é€ï¼ˆå­—ç¬¦ä¸²-å¯¹è±¡éƒ½å¯ï¼‰"><a href="#åŸºç¡€å‘é€ï¼ˆå­—ç¬¦ä¸²-å¯¹è±¡éƒ½å¯ï¼‰" class="headerlink" title="åŸºç¡€å‘é€ï¼ˆå­—ç¬¦ä¸²&#x2F;å¯¹è±¡éƒ½å¯ï¼‰"></a>åŸºç¡€å‘é€ï¼ˆå­—ç¬¦ä¸²&#x2F;å¯¹è±¡éƒ½å¯ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SendResult result = rocketMQTemplate.syncSend(&quot;test-topic&quot;, &quot;Hello RocketMQ!&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="å¸¦è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰"><a href="#å¸¦è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰" class="headerlink" title="å¸¦è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰"></a>å¸¦è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SendResult result = rocketMQTemplate.syncSend(&quot;test-topic&quot;, &quot;Hello RocketMQ!&quot;, 3000);</span><br></pre></td></tr></table></figure>

<h4 id="å‘é€å¸¦-Tag-çš„æ¶ˆæ¯"><a href="#å‘é€å¸¦-Tag-çš„æ¶ˆæ¯" class="headerlink" title="å‘é€å¸¦ Tag çš„æ¶ˆæ¯"></a>å‘é€å¸¦ Tag çš„æ¶ˆæ¯</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rocketMQTemplate.syncSend(&quot;test-topic:TagA&quot;, &quot;Hello with TagA&quot;);</span><br></pre></td></tr></table></figure>

<p><code>Topic:Tag</code> æ˜¯ RocketMQ çš„è§„èŒƒå†™æ³•ï¼Œæ¶ˆè´¹è€…å¯ä»¥æŒ‰ Tag è¿‡æ»¤ã€‚  </p>
<h4 id="å‘é€å¸¦-Key-çš„æ¶ˆæ¯ï¼ˆæ–¹ä¾¿è¿½è¸ªï¼‰"><a href="#å‘é€å¸¦-Key-çš„æ¶ˆæ¯ï¼ˆæ–¹ä¾¿è¿½è¸ªï¼‰" class="headerlink" title="å‘é€å¸¦ Key çš„æ¶ˆæ¯ï¼ˆæ–¹ä¾¿è¿½è¸ªï¼‰"></a>å‘é€å¸¦ Key çš„æ¶ˆæ¯ï¼ˆæ–¹ä¾¿è¿½è¸ªï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Message&lt;String&gt; msg = MessageBuilder.withPayload(&quot;å¸¦Keyçš„æ¶ˆæ¯&quot;)</span><br><span class="line">        .setHeader(RocketMQHeaders.KEYS, &quot;orderId:1001&quot;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">SendResult result = rocketMQTemplate.syncSend(&quot;test-topic&quot;, msg);</span><br></pre></td></tr></table></figure>

<h4 id="æ‰¹é‡å‘é€ï¼ˆå¤šæ¡åˆå¹¶ä¸€æ¬¡å‘é€ï¼‰"><a href="#æ‰¹é‡å‘é€ï¼ˆå¤šæ¡åˆå¹¶ä¸€æ¬¡å‘é€ï¼‰" class="headerlink" title="æ‰¹é‡å‘é€ï¼ˆå¤šæ¡åˆå¹¶ä¸€æ¬¡å‘é€ï¼‰"></a>æ‰¹é‡å‘é€ï¼ˆå¤šæ¡åˆå¹¶ä¸€æ¬¡å‘é€ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Message&lt;?&gt;&gt; msgs = Arrays.asList(</span><br><span class="line">    MessageBuilder.withPayload(&quot;msg-1&quot;).build(),</span><br><span class="line">    MessageBuilder.withPayload(&quot;msg-2&quot;).build()</span><br><span class="line">);</span><br><span class="line">SendResult result = rocketMQTemplate.syncSend(&quot;test-topic&quot;, msgs);</span><br></pre></td></tr></table></figure>

<h4 id="å¼‚æ­¥å‘é€"><a href="#å¼‚æ­¥å‘é€" class="headerlink" title="å¼‚æ­¥å‘é€"></a>å¼‚æ­¥å‘é€</h4><p> âœ… ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œé€‚åˆæ—¥å¿—ã€åŸ‹ç‚¹ã€é€šçŸ¥ç±»ä¸šåŠ¡ã€‚  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rocketMQTemplate.asyncSend(&quot;test-topic&quot;, &quot;Async Message&quot;, new SendCallback() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSuccess(SendResult sendResult) &#123;</span><br><span class="line">        System.out.println(&quot;âœ… å¼‚æ­¥å‘é€æˆåŠŸï¼š&quot; + sendResult.getMsgId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onException(Throwable throwable) &#123;</span><br><span class="line">        System.err.println(&quot;âŒ å¼‚æ­¥å‘é€å¤±è´¥ï¼š&quot; + throwable.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p> ğŸ‘‰ å¸¦ Tag + Key çš„å¼‚æ­¥å‘é€  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Message&lt;String&gt; msg = MessageBuilder.withPayload(&quot;Async with Tag &amp; Key&quot;)</span><br><span class="line">        .setHeader(RocketMQHeaders.KEYS, &quot;userId:2025&quot;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">rocketMQTemplate.asyncSend(&quot;test-topic:TagB&quot;, msg, new SendCallback() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSuccess(SendResult sendResult) &#123;</span><br><span class="line">        System.out.println(&quot;å¼‚æ­¥æˆåŠŸ: &quot; + sendResult);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void onException(Throwable e) &#123;</span><br><span class="line">        System.err.println(&quot;å¼‚æ­¥å¤±è´¥: &quot; + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="å•å‘å‘å¸ƒ"><a href="#å•å‘å‘å¸ƒ" class="headerlink" title="å•å‘å‘å¸ƒ"></a>å•å‘å‘å¸ƒ</h4><p> âœ… ä¸ç­‰å¾…ç»“æœï¼Œæ€§èƒ½æœ€é«˜ï¼Œå¯é æ€§æœ€ä½ï¼›ç”¨äº <strong>æ—¥å¿—ä¸ŠæŠ¥ &#x2F; åŸ‹ç‚¹ç»Ÿè®¡</strong>ã€‚  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rocketMQTemplate.sendOneWay(&quot;test-topic&quot;, &quot;OneWay message&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="è‡ªå®šä¹‰å‘å¸ƒ"><a href="#è‡ªå®šä¹‰å‘å¸ƒ" class="headerlink" title="è‡ªå®šä¹‰å‘å¸ƒ"></a>è‡ªå®šä¹‰å‘å¸ƒ</h4><p> å¯è‡ªå®šä¹‰ header åœ¨æ¶ˆè´¹ç«¯è·å–ã€‚  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Message&lt;String&gt; msg = MessageBuilder.withPayload(&quot;å¸¦è‡ªå®šä¹‰headerçš„æ¶ˆæ¯&quot;)</span><br><span class="line">        .setHeader(&quot;X-Source&quot;, &quot;OrderService&quot;)</span><br><span class="line">        .setHeader(RocketMQHeaders.KEYS, &quot;key-001&quot;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">rocketMQTemplate.syncSend(&quot;test-topic&quot;, msg);</span><br></pre></td></tr></table></figure>

<p>æ¶ˆè´¹è€…ç«¯å¯ä»¥é€šè¿‡ <code>message.getHeaders().get(&quot;X-Source&quot;)</code> è·å–ã€‚</p>
<h3 id="æ¥å—æ¶ˆæ¯ï¼ˆæ¶ˆè´¹ç«¯ï¼‰"><a href="#æ¥å—æ¶ˆæ¯ï¼ˆæ¶ˆè´¹ç«¯ï¼‰" class="headerlink" title="æ¥å—æ¶ˆæ¯ï¼ˆæ¶ˆè´¹ç«¯ï¼‰"></a>æ¥å—æ¶ˆæ¯ï¼ˆæ¶ˆè´¹ç«¯ï¼‰</h3><p> RocketMQ æ¶ˆè´¹è€…é€šè¿‡ <strong>ç›‘å¬ Topic</strong> æ¥æ¥æ”¶æ¶ˆæ¯ã€‚Spring Boot ä¸­é€šå¸¸ä½¿ç”¨æ³¨è§£ï¼š<code>@RocketMQMessageListener</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@RocketMQMessageListener(</span><br><span class="line">    topic = &quot;test-topic&quot;,               // è¦ç›‘å¬çš„ä¸»é¢˜</span><br><span class="line">    consumerGroup = &quot;test-consumer&quot;     // æ¶ˆè´¹è€…ç»„åï¼ˆå¦‚æœä¸¤ä¸ªæ¶ˆè´¹è€…ä½¿ç”¨ä¸åŒçš„æ¶ˆè´¹è€…ç»„åï¼Œå³ä½¿å®ƒä»¬ç›‘å¬çš„æ˜¯åŒä¸€ä¸ª Topicï¼Œ</span><br><span class="line">é‚£ä¹ˆå®ƒä»¬ä¹Ÿä¼šå„è‡ªç‹¬ç«‹åœ°æ¥æ”¶åˆ°æ‰€æœ‰æ¶ˆæ¯ï¼Œäº’ä¸å½±å“ã€‚ï¼‰</span><br><span class="line">)</span><br><span class="line">public class SimpleConsumer implements RocketMQListener&lt;String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(String message) &#123;</span><br><span class="line">        System.out.println(&quot;âœ… æ”¶åˆ°æ¶ˆæ¯ï¼š&quot; + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>RocketMQListener&lt;T&gt;</code> çš„æ³›å‹ <code>T</code> å†³å®šäº†æ¶ˆæ¯ä½“ååºåˆ—åŒ–æˆä»€ä¹ˆç±»å‹ï¼Œä¸€èˆ¬æ˜¯ <code>String</code> æˆ– <code>è‡ªå®šä¹‰å¯¹è±¡</code>ã€‚  </p>
<h4 id="æ¥æ”¶å¸¦-Tag-çš„æ¶ˆæ¯"><a href="#æ¥æ”¶å¸¦-Tag-çš„æ¶ˆæ¯" class="headerlink" title="æ¥æ”¶å¸¦ Tag çš„æ¶ˆæ¯"></a>æ¥æ”¶å¸¦ Tag çš„æ¶ˆæ¯</h4><p> å¦‚æœç”Ÿäº§è€…å‘é€æ—¶ç”¨äº† Tagï¼ˆå¦‚ <code>test-topic:TagA</code>ï¼‰ï¼Œæ¶ˆè´¹è€…å¯ä»¥åœ¨æ³¨è§£ä¸­æŒ‡å®šè¿‡æ»¤ï¼š  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RocketMQMessageListener(</span><br><span class="line">    topic = &quot;test-topic&quot;,</span><br><span class="line">    consumerGroup = &quot;tagA-consumer&quot;,</span><br><span class="line">    selectorExpression = &quot;TagA&quot; // åªæ¥æ”¶TagAçš„æ¶ˆæ¯</span><br><span class="line">)</span><br><span class="line">public class TagAConsumer implements RocketMQListener&lt;String&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(String msg) &#123;</span><br><span class="line">        System.out.println(&quot;æ”¶åˆ°TagAæ¶ˆæ¯ï¼š&quot; + msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> æ”¯æŒè¡¨è¾¾å¼è¿‡æ»¤ï¼š<code>&quot;TagA || TagB&quot;</code>RocketMQ ä¼šåœ¨ Broker ç«¯è¿‡æ»¤ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“ã€‚  </p>
<h4 id="æ¥æ”¶å¯¹è±¡æ¶ˆæ¯"><a href="#æ¥æ”¶å¯¹è±¡æ¶ˆæ¯" class="headerlink" title="æ¥æ”¶å¯¹è±¡æ¶ˆæ¯"></a>æ¥æ”¶å¯¹è±¡æ¶ˆæ¯</h4><p> å¦‚æœå‘é€æ—¶ç”¨äº†å¯¹è±¡ï¼ˆæ¯”å¦‚ <code>User</code>ï¼‰ï¼Œæ¥æ”¶ç«¯å¯ä»¥ç›´æ¥ååºåˆ—åŒ–ï¼š  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">public class User &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@RocketMQMessageListener(topic = &quot;user-topic&quot;, consumerGroup = &quot;user-consumer&quot;)</span><br><span class="line">public class UserConsumer implements RocketMQListener&lt;User&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(User user) &#123;</span><br><span class="line">        System.out.println(&quot;æ”¶åˆ°Useræ¶ˆæ¯ï¼š&quot; + user.getName() + &quot; - &quot; + user.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç›‘å¬æ›´å¤šç»†èŠ‚"><a href="#ç›‘å¬æ›´å¤šç»†èŠ‚" class="headerlink" title="ç›‘å¬æ›´å¤šç»†èŠ‚"></a>ç›‘å¬æ›´å¤šç»†èŠ‚</h3><table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ä½œç”¨</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>topic</code></td>
<td>ä¸»é¢˜å</td>
<td><code>&quot;order-topic&quot;</code></td>
</tr>
<tr>
<td><code>consumerGroup</code></td>
<td>æ¶ˆè´¹è€…ç»„åï¼ˆåŒç»„å…±äº«æ¶ˆè´¹ï¼‰</td>
<td><code>&quot;order-group&quot;</code></td>
</tr>
<tr>
<td><code>selectorExpression</code></td>
<td>Tag è¿‡æ»¤</td>
<td>&#96;â€TagA</td>
</tr>
<tr>
<td><code>consumeMode</code></td>
<td>æ¶ˆè´¹æ¨¡å¼ï¼ˆå¹¶å‘ &#x2F; é¡ºåºï¼‰</td>
<td><code>ConsumeMode.CONCURRENTLY</code></td>
</tr>
<tr>
<td><code>messageModel</code></td>
<td>é›†ç¾¤&#x2F;å¹¿æ’­æ¨¡å¼</td>
<td><code>MessageModel.CLUSTERING</code><br/> or <code>BROADCASTING</code></td>
</tr>
</tbody></table>
<h3 id="ä»€ä¹ˆæ˜¯æ¶ˆè´¹è€…ç»„åï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¶ˆè´¹è€…ç»„åï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¶ˆè´¹è€…ç»„åï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¶ˆè´¹è€…ç»„åï¼Ÿ</h3><p><strong>å®šä¹‰ï¼š</strong><br>æ¶ˆè´¹è€…ç»„æ˜¯ <strong>ä¸€ç»„æ¶ˆè´¹ç›¸åŒ Topicã€å…·æœ‰ç›¸åŒæ¶ˆè´¹é€»è¾‘çš„æ¶ˆè´¹è€…å®ä¾‹</strong> çš„é›†åˆã€‚RocketMQ ä»¥ç»„ä¸ºå•ä½è¿›è¡Œæ¶ˆæ¯åˆ†é…å’Œæ¶ˆè´¹è¿›åº¦ç®¡ç†ã€‚</p>
<table>
<thead>
<tr>
<th>ç»„å…³ç³» \ æ¶ˆè´¹æ¨¡å¼</th>
<th><strong>é›†ç¾¤æ¨¡å¼ï¼ˆCLUSTERINGï¼Œé»˜è®¤ï¼‰</strong></th>
<th><strong>å¹¿æ’­æ¨¡å¼ï¼ˆBROADCASTINGï¼‰</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>åŒä¸€ç»„å</strong></td>
<td><strong>ç»„å†…åˆ†æ‘Š</strong>ï¼šæ¯æ¡æ¶ˆæ¯åªè¢«ç»„å†…<strong>ä¸€ä¸ªå®ä¾‹</strong>æ¶ˆè´¹ä¸€æ¬¡ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ã€‚</td>
<td><strong>ç»„å†…å…¨å‘˜éƒ½æ”¶</strong>ï¼šç»„å†…<strong>æ¯ä¸ªå®ä¾‹</strong>éƒ½ä¼šæ”¶åˆ°<strong>å…¨éƒ¨æ¶ˆæ¯</strong>ã€‚</td>
</tr>
<tr>
<td><strong>ä¸åŒç»„å</strong></td>
<td><strong>å„ç»„ç‹¬ç«‹åˆ†æ‘Š</strong>ï¼šæ¯ä¸ªç»„éƒ½ä¼šå„è‡ªæ”¶åˆ°<strong>å…¨é‡æ¶ˆæ¯çš„ä¸€ä»½</strong>ï¼Œå¹¶åœ¨ç»„å†…å†åšè´Ÿè½½å‡è¡¡ã€‚</td>
<td><strong>å„ç»„å…¨å‘˜éƒ½æ”¶</strong>ï¼šæ¯ä¸ªç»„ã€ç»„å†…æ¯ä¸ªå®ä¾‹ï¼Œéƒ½ä¼šæ”¶åˆ°<strong>å…¨éƒ¨æ¶ˆæ¯</strong>ï¼ˆç­‰äºå¤šä»½å¹¿æ’­ï¼‰ã€‚</td>
</tr>
</tbody></table>
<p>ä¸¾ä¾‹è¯´æ˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Aç»„ï¼šè®¢å•ç³»ç»Ÿ</span><br><span class="line">@RocketMQMessageListener(topic = &quot;order-topic&quot;, consumerGroup = &quot;order-group&quot;)</span><br><span class="line"></span><br><span class="line">// Bç»„ï¼šç§¯åˆ†ç³»ç»Ÿ</span><br><span class="line">@RocketMQMessageListener(topic = &quot;order-topic&quot;, consumerGroup = &quot;point-group&quot;)</span><br></pre></td></tr></table></figure>

<p>åŒä¸€ä¸ª Topicï¼ˆ<code>order-topic</code>ï¼‰ï¼š</p>
<ul>
<li><code>order-group</code> è´Ÿè´£æ›´æ–°è®¢å•çŠ¶æ€</li>
<li><code>point-group</code> è´Ÿè´£åŠ ç§¯åˆ†</li>
</ul>
<p>âœ… ä¸¤ä¸ªç»„äº’ä¸å½±å“ï¼Œéƒ½èƒ½å„è‡ªæ”¶åˆ°æ‰€æœ‰è®¢å•æ¶ˆæ¯ã€‚</p>
<h3 id="æ¶ˆè´¹æ¨¡å¼åŒºåˆ«"><a href="#æ¶ˆè´¹æ¨¡å¼åŒºåˆ«" class="headerlink" title="æ¶ˆè´¹æ¨¡å¼åŒºåˆ«"></a>æ¶ˆè´¹æ¨¡å¼åŒºåˆ«</h3><table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>ç‰¹ç‚¹</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é›†ç¾¤æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</strong></td>
<td>å¤šä¸ªæ¶ˆè´¹è€…åˆ†æ‘Šæ¶ˆæ¯</td>
<td>æ™®é€šæ¶ˆæ¯å¤„ç†ï¼ˆå¹¶å‘é«˜ï¼‰</td>
</tr>
<tr>
<td><strong>å¹¿æ’­æ¨¡å¼</strong></td>
<td>æ¯ä¸ªæ¶ˆè´¹è€…éƒ½æ”¶åˆ°åŒæ ·çš„æ¶ˆæ¯</td>
<td>ç³»ç»Ÿé…ç½®åŒæ­¥ã€ç¼“å­˜æ›´æ–°ç­‰</td>
</tr>
</tbody></table>
<h2 id="é¡ºåºæ¶ˆæ¯"><a href="#é¡ºåºæ¶ˆæ¯" class="headerlink" title="é¡ºåºæ¶ˆæ¯"></a>é¡ºåºæ¶ˆæ¯</h2><h3 id="âœ…-åœºæ™¯ä¸ç‰¹æ€§"><a href="#âœ…-åœºæ™¯ä¸ç‰¹æ€§" class="headerlink" title="âœ… åœºæ™¯ä¸ç‰¹æ€§"></a>âœ… åœºæ™¯ä¸ç‰¹æ€§</h3><ul>
<li><strong>ä½œç”¨</strong>ï¼šä¿è¯åŒä¸€ä¸šåŠ¡æ ‡è¯†ï¼ˆå¦‚åŒä¸€è®¢å•ï¼‰ä¸‹çš„æ¶ˆæ¯ä¸¥æ ¼æŒ‰é¡ºåºå‘é€ä¸æ¶ˆè´¹ã€‚</li>
<li><strong>åŸç†</strong>ï¼šå°†ç›¸åŒä¸šåŠ¡ Key çš„æ¶ˆæ¯å‘é€åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—ï¼ˆMessageQueueï¼‰ã€‚</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šè®¢å•çŠ¶æ€æµè½¬ï¼ˆåˆ›å»º â†’ æ”¯ä»˜ â†’ å‘è´§ â†’ æ”¶è´§ï¼‰ã€äº¤æ˜“æµæ°´ç­‰ã€‚</li>
</ul>
<h3 id="sharding-key-å’Œ-message-key"><a href="#sharding-key-å’Œ-message-key" class="headerlink" title="sharding key å’Œ message key"></a><code>sharding key</code> å’Œ <code>message key</code></h3><table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>ä½œç”¨</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>**message key**</code></td>
<td>æ¶ˆæ¯çš„ä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼Œç”¨æ¥è¿½è¸ªã€æ’æŸ¥ã€‚</td>
<td><code>orderId_1001</code></td>
</tr>
<tr>
<td><code>**sharding key**</code></td>
<td>æ¶ˆæ¯<strong>åˆ†åŒºè·¯ç”±ä¾æ®</strong>ï¼Œå†³å®šæ¶ˆæ¯è¿›å“ªä¸ªé˜Ÿåˆ—ã€‚</td>
<td><code>orderId_1001</code></td>
</tr>
</tbody></table>
<p>åŒºåˆ«è§£æ</p>
<table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>message key</th>
<th>sharding key</th>
</tr>
</thead>
<tbody><tr>
<td>ä½œç”¨å±‚é¢</td>
<td>ä¸šåŠ¡è¿½è¸ª</td>
<td>é¡ºåºæŠ•é€’</td>
</tr>
<tr>
<td>è®¾ç½®æ–¹å¼</td>
<td>é€šè¿‡ <code>RocketMQHeaders.KEYS</code><br/> è®¾ç½®</td>
<td>ä½œä¸º <code>syncSendOrderly()</code><br/> çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥</td>
</tr>
<tr>
<td>ä½¿ç”¨è€…</td>
<td>è¿ç»´ &#x2F; å¼€å‘æŸ¥æ¶ˆæ¯ç”¨</td>
<td>Broker ç”¨äºè®¡ç®—é˜Ÿåˆ—ç´¢å¼•</td>
</tr>
<tr>
<td>æ˜¯å¦å¿…é¡»</td>
<td>å¦ï¼ˆå»ºè®®åŠ ï¼‰</td>
<td>æ˜¯ï¼ˆé¡ºåºæ¶ˆæ¯å¿…é¡»è¦ï¼‰</td>
</tr>
<tr>
<td>ç¤ºä¾‹</td>
<td><code>&quot;orderId:1001&quot;</code></td>
<td><code>&quot;orderId_1001&quot;</code></td>
</tr>
</tbody></table>
<p>ä¸¾ä¾‹è¯´æ˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// é¡ºåºæ¶ˆæ¯å‘é€</span><br><span class="line">Message&lt;String&gt; msg = MessageBuilder.withPayload(&quot;è®¢å•åˆ›å»º&quot;)</span><br><span class="line">        .setHeader(RocketMQHeaders.KEYS, &quot;orderId:1001&quot;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">rocketMQTemplate.syncSendOrderly(&quot;order-topic&quot;, msg, &quot;orderId_1001&quot;);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>KEYS</code> â†’ ç”¨äºæ—¥å¿—è¿½è¸ªï¼Œæ¯”å¦‚ä½ æŸ¥æ—¥å¿—æ—¶å¯ç”¨ <code>mqadmin queryMsgByKey -k orderId:1001</code>ã€‚</li>
<li><code>sharding key</code> â†’ ç”¨äº<strong>å†³å®šæ¶ˆæ¯è¿›å…¥å“ªä¸ªé˜Ÿåˆ—</strong>ï¼ŒBroker ä¼šé€šè¿‡å®ƒè®¡ç®—å“ˆå¸Œï¼Œè®©ç›¸åŒ key çš„æ¶ˆæ¯è¿›å…¥åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œä»è€Œä¿è¯é¡ºåºã€‚</li>
</ul>
<h3 id="é¡ºåºå‘é€ï¼ˆåŒæ­¥ï¼‰"><a href="#é¡ºåºå‘é€ï¼ˆåŒæ­¥ï¼‰" class="headerlink" title="é¡ºåºå‘é€ï¼ˆåŒæ­¥ï¼‰"></a>é¡ºåºå‘é€ï¼ˆåŒæ­¥ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å‘é€é¡ºåºæ¶ˆæ¯ï¼ˆåŒæ­¥ï¼‰</span><br><span class="line">rocketMQTemplate.syncSendOrderly(</span><br><span class="line">    &quot;order-topic&quot;,       // Topic</span><br><span class="line">    &quot;åˆ›å»ºè®¢å•æ¶ˆæ¯&quot;,        // æ¶ˆæ¯ä½“</span><br><span class="line">    &quot;orderId_1001&quot;       // Sharding Keyï¼ˆåˆ†ç‰‡é”®ï¼‰</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="é¡ºåºå‘é€ï¼ˆå¼‚æ­¥ï¼‰"><a href="#é¡ºåºå‘é€ï¼ˆå¼‚æ­¥ï¼‰" class="headerlink" title="é¡ºåºå‘é€ï¼ˆå¼‚æ­¥ï¼‰"></a>é¡ºåºå‘é€ï¼ˆå¼‚æ­¥ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">rocketMQTemplate.asyncSendOrderly(</span><br><span class="line">    &quot;order-topic&quot;,</span><br><span class="line">    &quot;æ”¯ä»˜å®Œæˆæ¶ˆæ¯&quot;,</span><br><span class="line">    &quot;orderId_1001&quot;,     // Sharding Key</span><br><span class="line">    new SendCallback() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onSuccess(SendResult sendResult) &#123;</span><br><span class="line">            System.out.println(&quot;âœ… å¼‚æ­¥é¡ºåºæ¶ˆæ¯å‘é€æˆåŠŸï¼š&quot; + sendResult.getMsgId());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onException(Throwable e) &#123;</span><br><span class="line">            System.err.println(&quot;âŒ å¼‚æ­¥é¡ºåºæ¶ˆæ¯å‘é€å¤±è´¥ï¼š&quot; + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="å»¶æ—¶æ¶ˆæ¯"><a href="#å»¶æ—¶æ¶ˆæ¯" class="headerlink" title="å»¶æ—¶æ¶ˆæ¯"></a>å»¶æ—¶æ¶ˆæ¯</h2><h3 id="âœ…-åœºæ™¯ä¸ç‰¹æ€§-1"><a href="#âœ…-åœºæ™¯ä¸ç‰¹æ€§-1" class="headerlink" title="âœ… åœºæ™¯ä¸ç‰¹æ€§"></a>âœ… åœºæ™¯ä¸ç‰¹æ€§</h3><ul>
<li><strong>ä½œç”¨</strong>ï¼šè®©æ¶ˆæ¯åœ¨å‘é€åå»¶è¿Ÿä¸€æ®µæ—¶é—´æ‰è¢«æ¶ˆè´¹è€…çœ‹åˆ°ã€‚</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼š<ul>
<li>è®¢å•è¶…æ—¶æœªæ”¯ä»˜ â†’ è‡ªåŠ¨å–æ¶ˆ</li>
<li>ä¼šå‘˜å³å°†åˆ°æœŸ â†’ æå‰æé†’</li>
<li>æ”¯ä»˜ç»“æœå›è°ƒ â†’ å»¶æ—¶è¡¥å¿</li>
</ul>
</li>
</ul>
<p>ğŸ’¡ å»¶æ—¶æ¶ˆæ¯åœ¨ Broker ç«¯ä¿å­˜ä¸€æ®µæ—¶é—´ï¼Œåˆ°æœŸåå†æŠ•é€’ç»™çœŸæ­£çš„ Topicã€‚</p>
<h3 id="å»¶æ—¶æ¶ˆæ¯å‘é€ï¼ˆåŒæ­¥ï¼‰"><a href="#å»¶æ—¶æ¶ˆæ¯å‘é€ï¼ˆåŒæ­¥ï¼‰" class="headerlink" title="å»¶æ—¶æ¶ˆæ¯å‘é€ï¼ˆåŒæ­¥ï¼‰"></a>å»¶æ—¶æ¶ˆæ¯å‘é€ï¼ˆåŒæ­¥ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// å‘é€å»¶æ—¶æ¶ˆæ¯</span><br><span class="line">Message&lt;String&gt; msg = MessageBuilder.withPayload(&quot;å»¶æ—¶æ¶ˆæ¯ï¼š30ç§’åæ‰§è¡Œ&quot;)</span><br><span class="line">        .setHeader(RocketMQHeaders.KEYS, &quot;orderId:1001&quot;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">// å»¶æ—¶ç­‰çº§è®¾ç½®ï¼ˆ1~18ï¼‰</span><br><span class="line">SendResult result = rocketMQTemplate.syncSend(</span><br><span class="line">    &quot;delay-topic&quot;, msg, 3000, 3 // ç¬¬4ä¸ªå‚æ•°æ˜¯å»¶æ—¶ç­‰çº§ level=3</span><br><span class="line">);</span><br><span class="line">System.out.println(&quot;âœ… å»¶æ—¶æ¶ˆæ¯å‘é€æˆåŠŸï¼š&quot; + result.getMsgId());</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>ç­‰çº§</th>
<th>å»¶æ—¶æ—¶é—´</th>
<th>ç­‰çº§</th>
<th>å»¶æ—¶æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1s</td>
<td>10</td>
<td>10m</td>
</tr>
<tr>
<td>2</td>
<td>5s</td>
<td>11</td>
<td>20m</td>
</tr>
<tr>
<td>3</td>
<td>10s</td>
<td>12</td>
<td>30m</td>
</tr>
<tr>
<td>4</td>
<td>30s</td>
<td>13</td>
<td>1h</td>
</tr>
<tr>
<td>5</td>
<td>1m</td>
<td>14</td>
<td>2h</td>
</tr>
<tr>
<td>6</td>
<td>2m</td>
<td>15</td>
<td>3h</td>
</tr>
<tr>
<td>7</td>
<td>3m</td>
<td>16</td>
<td>4h</td>
</tr>
<tr>
<td>8</td>
<td>4m</td>
<td>17</td>
<td>5h</td>
</tr>
<tr>
<td>9</td>
<td>5m</td>
<td>18</td>
<td>6h</td>
</tr>
</tbody></table>
<p> âš™ï¸ å¯ä»¥é€šè¿‡ <code>broker.conf</code> é…ç½®é¡¹ <code>messageDelayLevel</code> è‡ªå®šä¹‰å»¶æ—¶ç­‰çº§ã€‚  </p>
<p><strong>RocketMQ é»˜è®¤çš„å»¶æ—¶æœºåˆ¶æ˜¯â€œç­‰çº§åˆ¶ï¼ˆLevel-Basedï¼‰â€çš„</strong>ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³ä½¿ç”¨éå†…ç½®çš„å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯”å¦‚ 45 åˆ†é’Ÿã€7 ç§’ã€2 å¤©ï¼‰ï¼Œ<strong>å¿…é¡»åœ¨ Broker ç«¯é…ç½®è‡ªå®šä¹‰å»¶æ—¶ç­‰çº§ã€‚</strong></p>
<h3 id="å¼‚æ­¥å»¶æ—¶æ¶ˆæ¯"><a href="#å¼‚æ­¥å»¶æ—¶æ¶ˆæ¯" class="headerlink" title="å¼‚æ­¥å»¶æ—¶æ¶ˆæ¯"></a>å¼‚æ­¥å»¶æ—¶æ¶ˆæ¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Message&lt;String&gt; msg = MessageBuilder.withPayload(&quot;å¼‚æ­¥å»¶æ—¶æ¶ˆæ¯&quot;)</span><br><span class="line">        .setHeader(RocketMQHeaders.KEYS, &quot;task:2025&quot;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">rocketMQTemplate.asyncSend(&quot;delay-topic&quot;, msg, new SendCallback() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onSuccess(SendResult sendResult) &#123;</span><br><span class="line">        System.out.println(&quot;âœ… å¼‚æ­¥å»¶æ—¶å‘é€æˆåŠŸï¼š&quot; + sendResult.getMsgId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onException(Throwable e) &#123;</span><br><span class="line">        System.err.println(&quot;âŒ å¼‚æ­¥å»¶æ—¶å‘é€å¤±è´¥ï¼š&quot; + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, 5000, 5); // è¶…æ—¶5sï¼Œå»¶æ—¶ç­‰çº§5ï¼ˆ1åˆ†é’Ÿï¼‰</span><br></pre></td></tr></table></figure>

<h2 id="äº‹åŠ¡æ¶ˆæ¯"><a href="#äº‹åŠ¡æ¶ˆæ¯" class="headerlink" title="äº‹åŠ¡æ¶ˆæ¯"></a>äº‹åŠ¡æ¶ˆæ¯</h2><h3 id="âœ…-åœºæ™¯ä¸ç‰¹æ€§-2"><a href="#âœ…-åœºæ™¯ä¸ç‰¹æ€§-2" class="headerlink" title="âœ… åœºæ™¯ä¸ç‰¹æ€§"></a>âœ… åœºæ™¯ä¸ç‰¹æ€§</h3><ul>
<li><strong>ä½œç”¨</strong>ï¼šä¿è¯æ¶ˆæ¯ä¸æœ¬åœ°äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼š<ul>
<li>ä¸‹å•æˆåŠŸ â†’ æ‰£å‡åº“å­˜</li>
<li>æ”¯ä»˜å®Œæˆ â†’ æ›´æ–°è®¢å•çŠ¶æ€</li>
<li>åˆ›å»ºè®¢å• â†’ å‘é€ç§¯åˆ†å¥–åŠ±</li>
</ul>
</li>
</ul>
<p>ğŸ’¡ æ ¸å¿ƒæ€æƒ³ï¼š<strong>æœ¬åœ°äº‹åŠ¡ + æ¶ˆæ¯å‘é€ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</strong></p>
<h3 id="å‘é€äº‹åŠ¡æ¶ˆæ¯"><a href="#å‘é€äº‹åŠ¡æ¶ˆæ¯" class="headerlink" title="å‘é€äº‹åŠ¡æ¶ˆæ¯"></a>å‘é€äº‹åŠ¡æ¶ˆæ¯</h3><p> äº‹åŠ¡æ¶ˆæ¯ä½¿ç”¨ä¸“é—¨çš„ç”Ÿäº§è€…ï¼š<code>TransactionMQProducer</code>æˆ–åœ¨ SpringBoot åœºæ™¯ä¸‹ä½¿ç”¨ï¼š<code>rocketMQTemplate.sendMessageInTransaction()</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// å‘é€äº‹åŠ¡æ¶ˆæ¯</span><br><span class="line">Message&lt;String&gt; msg = MessageBuilder.withPayload(&quot;äº‹åŠ¡æ¶ˆæ¯ï¼šåˆ›å»ºè®¢å•&quot;)</span><br><span class="line">        .setHeader(RocketMQHeaders.KEYS, &quot;orderId:1001&quot;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">// ç¬¬ä¸‰ä¸ªå‚æ•° arg ä¼šä¼ å…¥æœ¬åœ°äº‹åŠ¡æ‰§è¡Œæ–¹æ³•ä¸­</span><br><span class="line">TransactionSendResult result = rocketMQTemplate.sendMessageInTransaction(</span><br><span class="line">        &quot;tx-producer-group&quot;,</span><br><span class="line">        &quot;tx-topic&quot;,</span><br><span class="line">        msg,</span><br><span class="line">        &quot;arg-info&quot;</span><br><span class="line">);</span><br><span class="line">System.out.println(&quot;âœ… äº‹åŠ¡æ¶ˆæ¯å‘é€ç»“æœï¼š&quot; + result.getSendStatus());</span><br></pre></td></tr></table></figure>

<h3 id="æœ¬åœ°äº‹åŠ¡æ‰§è¡Œä¸å›æŸ¥"><a href="#æœ¬åœ°äº‹åŠ¡æ‰§è¡Œä¸å›æŸ¥" class="headerlink" title="æœ¬åœ°äº‹åŠ¡æ‰§è¡Œä¸å›æŸ¥"></a>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œä¸å›æŸ¥</h3><p> äº‹åŠ¡æ¶ˆæ¯åˆ†ä¸º <strong>ä¸‰æ­¥èµ°</strong> ğŸ‘‡  </p>
<table>
<thead>
<tr>
<th>é˜¶æ®µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>â‘  åŠæ¶ˆæ¯ï¼ˆHalf Messageï¼‰</strong></td>
<td>å…ˆå‘é€åˆ° Brokerï¼Œä½†æ¶ˆè´¹è€…æš‚æ—¶ä¸å¯è§ã€‚</td>
</tr>
<tr>
<td><strong>â‘¡ æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</strong></td>
<td>åœ¨ç”Ÿäº§è€…æœ¬åœ°æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ‰£æ¬¾ã€è½åº“ï¼‰ã€‚</td>
</tr>
<tr>
<td><strong>â‘¢ Broker å›æŸ¥</strong></td>
<td>å¦‚æœç”Ÿäº§è€…æœªæ˜ç¡®æäº¤æˆ–å›æ»šï¼ŒBroker ä¼šå®šæ—¶å›æŸ¥äº‹åŠ¡çŠ¶æ€ã€‚</td>
</tr>
</tbody></table>
<h3 id="äº‹åŠ¡ç›‘å¬å™¨ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰"><a href="#äº‹åŠ¡ç›‘å¬å™¨ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰" class="headerlink" title="äº‹åŠ¡ç›‘å¬å™¨ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰"></a>äº‹åŠ¡ç›‘å¬å™¨ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</h3><p> å®ç° <code>RocketMQLocalTransactionListener</code> æ¥å£ï¼š  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@RocketMQTransactionListener(txProducerGroup = &quot;tx-producer-group&quot;)</span><br><span class="line">public class OrderTransactionListener implements RocketMQLocalTransactionListener &#123;</span><br><span class="line"></span><br><span class="line">    // Step 2: æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</span><br><span class="line">    @Override</span><br><span class="line">    public RocketMQLocalTransactionState executeLocalTransaction(Message msg, Object arg) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            System.out.println(&quot;æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼Œarg=&quot; + arg);</span><br><span class="line">            // TODO: è¿™é‡Œå†™ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚è®¢å•å…¥åº“ã€æ‰£å‡åº“å­˜ç­‰</span><br><span class="line">            return RocketMQLocalTransactionState.COMMIT; // æäº¤æ¶ˆæ¯</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            return RocketMQLocalTransactionState.ROLLBACK; // å›æ»šæ¶ˆæ¯</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Step 3: Broker å›æŸ¥äº‹åŠ¡çŠ¶æ€</span><br><span class="line">    @Override</span><br><span class="line">    public RocketMQLocalTransactionState checkLocalTransaction(Message msg) &#123;</span><br><span class="line">        System.out.println(&quot;Broker æ­£åœ¨å›æŸ¥äº‹åŠ¡çŠ¶æ€...&quot;);</span><br><span class="line">        // æ ¹æ®ä¸šåŠ¡è¡¨çŠ¶æ€åˆ¤æ–­</span><br><span class="line">        boolean success = true; // TODO æŸ¥è¯¢æ•°æ®åº“æˆ–ç¼“å­˜çŠ¶æ€</span><br><span class="line">        return success ? RocketMQLocalTransactionState.COMMIT : RocketMQLocalTransactionState.ROLLBACK;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¥å—æ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯ï¼ˆå’Œæ™®é€šæ¶ˆæ¯ä¸€æ ·ï¼‰"><a href="#æ¥å—æ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯ï¼ˆå’Œæ™®é€šæ¶ˆæ¯ä¸€æ ·ï¼‰" class="headerlink" title="æ¥å—æ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯ï¼ˆå’Œæ™®é€šæ¶ˆæ¯ä¸€æ ·ï¼‰"></a>æ¥å—æ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯ï¼ˆå’Œæ™®é€šæ¶ˆæ¯ä¸€æ ·ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@RocketMQMessageListener(topic = &quot;tx-topic&quot;, consumerGroup = &quot;tx-consumer-group&quot;)</span><br><span class="line">public class TxConsumer implements RocketMQListener&lt;String&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(String message) &#123;</span><br><span class="line">        System.out.println(&quot;âœ… æ”¶åˆ°äº‹åŠ¡æ¶ˆæ¯ï¼š&quot; + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> ğŸš© æ¶ˆè´¹è€…åªä¼šæ¥æ”¶åˆ°äº‹åŠ¡<strong>æœ€ç»ˆæäº¤æˆåŠŸ</strong>çš„æ¶ˆæ¯ã€‚  </p>
<h3 id="äº‹åŠ¡çŠ¶æ€æšä¸¾"><a href="#äº‹åŠ¡çŠ¶æ€æšä¸¾" class="headerlink" title="äº‹åŠ¡çŠ¶æ€æšä¸¾"></a>äº‹åŠ¡çŠ¶æ€æšä¸¾</h3>
    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Redisson/Redisson/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" rel="prev" title="åˆ†å¸ƒå¼é”">
                  <i class="fa fa-angle-left"></i> åˆ†å¸ƒå¼é”
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/RocketMQ/RocketMQ/%E4%BA%8B%E5%8A%A1%E6%B6%88%E6%81%AF/" rel="next" title="äº‹åŠ¡æ¶ˆæ¯">
                  äº‹åŠ¡æ¶ˆæ¯ <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">åˆ˜ç¿°éœ–</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
