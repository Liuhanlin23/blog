<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 8.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="HTTP各版本对比   对比项 HTTP&#x2F;1.1 HTTP&#x2F;2 HTTP&#x2F;3    发布时间 1999 年（RFC 2616） 2015 年（RFC 7540） 2022 年（RFC 9114）   传输协议 TCP TCP QUIC（UDP）   连接复用 ❌ 每次一个请求 ✅ 多路复用 ✅ 多路复用   队头阻塞 ⚠️ 存在 ⚠️ TCP 层仍存在 ✅ 完全消除">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP 1.1与HTTP 2">
<meta property="og:url" content="http://example.com/2025/11/25/%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/HTTP_1.1%E4%B8%8EHTTP_2/index.html">
<meta property="og:site_name" content="刘翰霖">
<meta property="og:description" content="HTTP各版本对比   对比项 HTTP&#x2F;1.1 HTTP&#x2F;2 HTTP&#x2F;3    发布时间 1999 年（RFC 2616） 2015 年（RFC 7540） 2022 年（RFC 9114）   传输协议 TCP TCP QUIC（UDP）   连接复用 ❌ 每次一个请求 ✅ 多路复用 ✅ 多路复用   队头阻塞 ⚠️ 存在 ⚠️ TCP 层仍存在 ✅ 完全消除">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761189940349-a5fcddf8-16cb-49a2-b493-6a4362630c68.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761190756619-2b4e761a-750f-4ca0-a08c-0fc538c7e079.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761202712642-98a3794b-5aab-4f7f-b00d-df92489ae964.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761202772923-31c6e43c-517e-4d62-bde0-a462f7a8c665.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761203086685-34f10817-2306-476f-bcd2-bd62e98f262e.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761203914100-35225b1c-4226-4aad-acd5-2cb604cef39d.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761203963602-15e3c956-eef4-4eba-bbbf-32563e0c123f.png">
<meta property="article:published_time" content="2025-11-25T13:35:19.248Z">
<meta property="article:modified_time" content="2025-11-25T13:40:27.967Z">
<meta property="article:author" content="刘翰霖">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761189940349-a5fcddf8-16cb-49a2-b493-6a4362630c68.png">


<link rel="canonical" href="http://example.com/2025/11/25/%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/HTTP_1.1%E4%B8%8EHTTP_2/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2025/11/25/%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/HTTP_1.1%E4%B8%8EHTTP_2/","path":"2025/11/25/网络/HTTP协议/HTTP_1.1与HTTP_2/","title":"HTTP 1.1与HTTP 2"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>HTTP 1.1与HTTP 2 | 刘翰霖</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  




<meta name="referrer" content="no-referrer">

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">刘翰霖</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP%E5%90%84%E7%89%88%E6%9C%AC%E5%AF%B9%E6%AF%94"><span class="nav-number">1.</span> <span class="nav-text">HTTP各版本对比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP2-%E7%9B%B8%E5%AF%B9%E4%BA%8EHTTP1-%E7%9A%84%E4%BA%94%E5%A4%A7%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8A%BF"><span class="nav-number">2.</span> <span class="nav-text">HTTP2 相对于HTTP1 的五大核心优势</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="nav-number">2.1.</span> <span class="nav-text">多路复用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP2%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E8%A7%A3%E5%86%B3%E4%BA%86HTTP1-1%E7%9A%84%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98"><span class="nav-number">2.1.1.</span> <span class="nav-text">HTTP2的多路复用解决了HTTP1.1的什么问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP2%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E5%8F%AA%E4%BC%9A%E4%B8%BA%E6%AF%8F%E4%B8%AA%E5%9F%9F%E5%90%8D%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E8%BF%9E%E6%8E%A5%E4%B9%88%EF%BC%9F"><span class="nav-number">2.1.2.</span> <span class="nav-text">HTTP2的多路复用只会为每个域名建立一个连接么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%B2%E8%A1%8C%E4%BC%A0%E8%BE%93-%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E"><span class="nav-number">2.1.3.</span> <span class="nav-text">什么是串行传输-&gt;队头阻塞</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%B2%E8%A1%8C%E8%BE%93%E5%87%BA"><span class="nav-number">2.1.3.1.</span> <span class="nav-text">什么是串行输出</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E"><span class="nav-number">2.1.3.2.</span> <span class="nav-text">为什么会队头阻塞</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AF%B9%E4%BA%8EHTTP1-1%E7%9A%84%E5%AF%B9%E5%A4%B4%E9%98%BB%E5%A1%9E%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E4%B8%B4%E6%97%B6%E8%A1%A5%E6%95%91%E7%AD%96%E7%95%A5"><span class="nav-number">2.1.3.3.</span> <span class="nav-text">对于HTTP1.1的对头阻塞浏览器的临时补救策略</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP2%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AF%E4%BB%A5%E8%A7%A3%E5%86%B3"><span class="nav-number">2.1.3.4.</span> <span class="nav-text">HTTP2为什么可以解决</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP2%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">2.1.4.</span> <span class="nav-text">HTTP2多路复用的实现原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A6%96%E5%85%88HTTP1-1%E7%9A%84%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F%E6%98%AF%E7%BA%AF%E6%96%87%E6%9C%AC%EF%BC%8C%E5%A4%AA%E8%BF%87%E7%AE%80%E5%8D%95"><span class="nav-number">2.1.4.1.</span> <span class="nav-text">首先HTTP1.1的消息格式是纯文本，太过简单</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP-2-%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%A0%B8%E5%BF%83%EF%BC%9A%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%88%86%E5%B8%A7-%E6%B5%81%EF%BC%88Stream%EF%BC%89"><span class="nav-number">2.1.4.2.</span> <span class="nav-text">HTTP&#x2F;2 的实现核心：二进制分帧 + 流（Stream）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP2%E6%8F%90%E4%BE%9B%E7%9A%84%E5%85%B6%E4%BB%96%E5%8A%9F%E8%83%BD"><span class="nav-number">2.1.4.3.</span> <span class="nav-text">HTTP2提供的其他功能</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E7%BA%A7%E5%88%86%E5%B8%A7"><span class="nav-number">2.2.</span> <span class="nav-text">二级分帧</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%BC%95%E5%85%A5%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%88%86%E5%B8%A7"><span class="nav-number">2.2.1.</span> <span class="nav-text">为什么要引入二进制分帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%83%E5%9C%A8%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="nav-number">2.2.2.</span> <span class="nav-text">它在协议中的位置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A7%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-number">2.2.3.</span> <span class="nav-text">帧是什么？</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%B4%E9%83%A8%E5%8E%8B%E7%BC%A9"><span class="nav-number">2.3.</span> <span class="nav-text">头部压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%8E%8B%E7%BC%A9%E5%A4%B4%E9%83%A8"><span class="nav-number">2.3.1.</span> <span class="nav-text">为什么要压缩头部</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HPACK%E6%98%AF%E6%80%8E%E4%B9%88%E5%8E%8B%E7%BC%A9%E7%9A%84"><span class="nav-number">2.3.2.</span> <span class="nav-text">HPACK是怎么压缩的</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E8%A1%A8"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">静态表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E8%A1%A8"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">动态表</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81%EF%BC%88%E5%BE%88%E9%B8%A1%E8%82%8B%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%85%B3%E9%97%AD%EF%BC%89"><span class="nav-number">2.4.</span> <span class="nav-text">服务器推送（很鸡肋，默认关闭）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E6%8E%A8%E9%80%81"><span class="nav-number">2.4.1.</span> <span class="nav-text">什么是服务推送</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E6%8E%A8%E9%80%81%E7%9A%84"><span class="nav-number">2.4.2.</span> <span class="nav-text">怎么实现推送的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BE%9D%E7%84%B6%E5%85%B7%E6%9C%89%E6%8E%A7%E5%88%B6%E6%9D%83"><span class="nav-number">2.4.3.</span> <span class="nav-text">客户端依然具有控制权</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%88%E9%B8%A1%E8%82%8B%EF%BC%8CHTTP-3%E5%B7%B2%E7%BB%8F%E5%BA%9F%E5%BC%83"><span class="nav-number">2.4.4.</span> <span class="nav-text">很鸡肋，HTTP&#x2F;3已经废弃</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E8%BF%9E%E6%8E%A5%E5%A4%8D%E7%94%A8"><span class="nav-number">2.5.</span> <span class="nav-text">单连接复用</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">刘翰霖</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">103</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/11/25/%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/HTTP_1.1%E4%B8%8EHTTP_2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="刘翰霖">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="刘翰霖">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="HTTP 1.1与HTTP 2 | 刘翰霖">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          HTTP 1.1与HTTP 2
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/" itemprop="url" rel="index"><span itemprop="name">HTTP协议</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="HTTP各版本对比"><a href="#HTTP各版本对比" class="headerlink" title="HTTP各版本对比"></a>HTTP各版本对比</h2><table>
<thead>
<tr>
<th>对比项</th>
<th>HTTP&#x2F;1.1</th>
<th>HTTP&#x2F;2</th>
<th>HTTP&#x2F;3</th>
</tr>
</thead>
<tbody><tr>
<td><strong>发布时间</strong></td>
<td>1999 年（RFC 2616）</td>
<td>2015 年（RFC 7540）</td>
<td>2022 年（RFC 9114）</td>
</tr>
<tr>
<td><strong>传输协议</strong></td>
<td>TCP</td>
<td>TCP</td>
<td><strong>QUIC（UDP）</strong></td>
</tr>
<tr>
<td><strong>连接复用</strong></td>
<td>❌ 每次一个请求</td>
<td>✅ 多路复用</td>
<td>✅ 多路复用</td>
</tr>
<tr>
<td><strong>队头阻塞</strong></td>
<td>⚠️ 存在</td>
<td>⚠️ TCP 层仍存在</td>
<td>✅ 完全消除</td>
</tr>
<tr>
<td><strong>压缩</strong></td>
<td>❌ 无</td>
<td>✅ HPACK</td>
<td>✅ QPACK</td>
</tr>
<tr>
<td><strong>加密</strong></td>
<td>可选（HTTPS）</td>
<td>推荐使用 HTTPS</td>
<td>强制加密（内置 TLS）</td>
</tr>
<tr>
<td><strong>服务端推送</strong></td>
<td>❌ 无</td>
<td>✅ 支持</td>
<td>✅ 支持</td>
</tr>
<tr>
<td><strong>目前使用情况</strong></td>
<td>🔸 仍广泛存在（低版本网站、内网系统）</td>
<td>🟢 主流标准（约占全球网站 70%+）</td>
<td>🧩 新兴主流（Chrome、Cloudflare、Google 全面支持）</td>
</tr>
</tbody></table>
<h2 id="HTTP2-相对于HTTP1-的五大核心优势"><a href="#HTTP2-相对于HTTP1-的五大核心优势" class="headerlink" title="HTTP2 相对于HTTP1 的五大核心优势"></a>HTTP2 相对于HTTP1 的五大核心优势</h2><table>
<thead>
<tr>
<th>序号</th>
<th>优势点</th>
<th>对应解决了 HTTP&#x2F;1.1 的什么问题</th>
<th>一句话理解</th>
</tr>
</thead>
<tbody><tr>
<td><strong>1️⃣</strong>** 多路复用 (Multiplexing)**</td>
<td>HTTP&#x2F;1.1 同一连接只能排队处理一个请求，容易“队头阻塞”</td>
<td>✅ 一个连接可同时传多个请求和响应，互不干扰</td>
<td><strong>让多个请求在同一连接中并行传输，不再排队等待。</strong></td>
</tr>
<tr>
<td><strong>2️⃣</strong>** 二进制分帧 (Binary Framing)**</td>
<td>HTTP&#x2F;1.1 使用纯文本格式，解析和传输效率低</td>
<td>✅ 将消息拆成二进制帧，提高解析速度和可靠性</td>
<td><strong>把文本协议改为二进制帧结构，传输更快更稳。</strong></td>
</tr>
<tr>
<td><strong>3️⃣</strong>** 头部压缩 (HPACK)**</td>
<td>每次请求都要重复传很长的 Header（Cookie、User-Agent 等）</td>
<td>✅ 使用压缩算法和索引表，大幅减少头部开销</td>
<td><strong>通过压缩与索引减少重复头部传输，节省带宽。</strong></td>
</tr>
<tr>
<td><strong>4️⃣</strong>** 服务器推送 (Server Push)**</td>
<td>客户端只能被动请求资源</td>
<td>✅ 服务器可主动推送资源（如 CSS、JS），减少延迟</td>
<td><strong>服务器可提前推送依赖资源，但已被 HTTP&#x2F;3 废弃。</strong></td>
</tr>
<tr>
<td><strong>5️⃣</strong>** 单连接复用（减少 TCP 连接数）**</td>
<td>HTTP&#x2F;1.1 需要多个 TCP 连接并行，资源浪费</td>
<td>✅ 一个连接即可传所有请求，握手少、延迟低</td>
<td><strong>一个连接跑完所有请求，握手更少，传输更快。</strong></td>
</tr>
</tbody></table>
<h3 id="多路复用"><a href="#多路复用" class="headerlink" title="多路复用"></a>多路复用</h3><p><font style="color:#DF2A3F;">一定要注意这里的多路复用和linux os 中的epoll 多路复用不是一个概念</font></p>
<p><font style="color:#DF2A3F;">它们的区别</font></p>
<table>
<thead>
<tr>
<th><font style="color:#000000;">对比点</font></th>
<th><strong><font style="color:#000000;">HTTP&#x2F;2 多路复用</font></strong></th>
<th><strong><font style="color:#000000;">epoll 多路复用</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td><font style="color:#000000;">所属层级</font></td>
<td><font style="color:#000000;">应用层（HTTP 协议）</font></td>
<td><font style="color:#000000;">操作系统内核层（I&#x2F;O 模型）</font></td>
</tr>
<tr>
<td><font style="color:#000000;">解决的问题</font></td>
<td><font style="color:#000000;">如何在一个 TCP 连接里同时传多个请求</font></td>
<td><font style="color:#000000;">如何让一个线程同时监听多个 socket</font></td>
</tr>
<tr>
<td><font style="color:#000000;">作用对象</font></td>
<td><font style="color:#000000;">一个 TCP 连接内的多个“流（stream）”</font></td>
<td><font style="color:#000000;">多个 TCP 连接（socket 文件描述符）</font></td>
</tr>
<tr>
<td><font style="color:#000000;">举例理解</font></td>
<td><font style="color:#000000;">在一条高速公路上开多条车道</font></td>
<td><font style="color:#000000;">一个交通指挥员同时盯着多条道路的红绿灯</font></td>
</tr>
</tbody></table>
<h4 id="HTTP2的多路复用解决了HTTP1-1的什么问题"><a href="#HTTP2的多路复用解决了HTTP1-1的什么问题" class="headerlink" title="HTTP2的多路复用解决了HTTP1.1的什么问题"></a>HTTP2的多路复用解决了HTTP1.1的什么问题</h4><p> 在 HTTP&#x2F;1.1 中：<br>● 一个 TCP 连接一次只能处理一个请求；<br>● 如果前一个请求没返回，下一个请求就得等；<br>● 对同一个域名，浏览器最多同时开 6 个连接来提升并发；<br>● 但开启过多连接会浪费资源、占用带宽，<strong>毕竟 TCP 连接的建立与销毁（握手、挥手）都十分昂贵。</strong></p>
<p><strong>HTTP2多路复用（Multiplexing）</strong>：<br>在 <strong>一个 TCP 连接</strong> 里，同时并行地发送多个 HTTP 请求和响应，<br>每个请求都有独立的 <strong>Stream ID（流编号）</strong>，互不干扰。</p>
<p>也就是说：</p>
<p>HTTP&#x2F;2 不再为每个请求都开新连接，而是让所有请求共享一个连接。<br>数据在同一个连接中被拆分成一帧一帧（Frame）交错发送，<br>浏览器和服务器根据 Stream ID 把属于同一个请求的帧重新组装起来。</p>
<p>解决的问题</p>
<table>
<thead>
<tr>
<th>HTTP&#x2F;1.1 的问题</th>
<th>HTTP&#x2F;2 的改进</th>
</tr>
</thead>
<tbody><tr>
<td>每个请求必须独占一个 TCP 连接（或排队等待）</td>
<td>✅ 所有请求共享一个连接</td>
</tr>
<tr>
<td>串行传输 → 队头阻塞严重</td>
<td>✅ 并行传输 → 不互相阻塞</td>
</tr>
<tr>
<td>建立多个连接浪费资源</td>
<td>✅ 一个连接复用 → 握手少、资源省</td>
</tr>
<tr>
<td>浏览器需要“域名分片”才能提高并发</td>
<td>✅ 不再需要域名分片</td>
</tr>
</tbody></table>
<h4 id="HTTP2的多路复用只会为每个域名建立一个连接么？"><a href="#HTTP2的多路复用只会为每个域名建立一个连接么？" class="headerlink" title="HTTP2的多路复用只会为每个域名建立一个连接么？"></a>HTTP2的多路复用只会为每个域名建立一个连接么？</h4><p> “HTTP&#x2F;2 一般会为同一个域名维持一个长连接，所有请求在该连接内通过多路复用并行传输；<br>不同域名、协议或端口的请求仍会建立各自的连接。”  </p>
<h4 id="什么是串行传输-队头阻塞"><a href="#什么是串行传输-队头阻塞" class="headerlink" title="什么是串行传输-&gt;队头阻塞"></a>什么是串行传输-&gt;队头阻塞</h4><h5 id="什么是串行输出"><a href="#什么是串行输出" class="headerlink" title="什么是串行输出"></a>什么是串行输出</h5><p>在 HTTP&#x2F;1.1 时代，一个 TCP 连接上：</p>
<p>一次只能处理一个请求。</p>
<p>也就是说：</p>
<ol>
<li>浏览器发一个请求（例如请求 <code>index.html</code>）；</li>
<li>必须等服务器返回完整响应后，</li>
<li>才能在同一个连接上发送下一个请求。</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761189940349-a5fcddf8-16cb-49a2-b493-6a4362630c68.png"></p>
<h5 id="为什么会队头阻塞"><a href="#为什么会队头阻塞" class="headerlink" title="为什么会队头阻塞"></a>为什么会队头阻塞</h5><p>“队头阻塞”就是说：</p>
<p>当队列最前面的请求（队头）没有完成时，<br>后面的请求都<strong>被迫等待</strong>，哪怕它们其实可以先返回。</p>
<p>比如：</p>
<ul>
<li>浏览器开了一个连接；</li>
<li>第一个请求 <code>/index.html</code> 卡住（服务器慢、网络抖动）；</li>
<li>后面的 <code>/style.css</code>、<code>/app.js</code> 都得等；</li>
<li>整个页面加载被拖慢。</li>
</ul>
<p>就像排队买奶茶：第一个人犹豫半天不点单，后面的人都动不了。</p>
<h5 id="对于HTTP1-1的对头阻塞浏览器的临时补救策略"><a href="#对于HTTP1-1的对头阻塞浏览器的临时补救策略" class="headerlink" title="对于HTTP1.1的对头阻塞浏览器的临时补救策略"></a>对于HTTP1.1的对头阻塞浏览器的临时补救策略</h5><p>为了减轻这种队头阻塞，浏览器在 HTTP&#x2F;1.1 里做了“<strong>并发连接限制</strong>”：</p>
<ul>
<li>对同一域名最多开 <strong>6 个 TCP 连接</strong>；</li>
<li>每个连接上<strong>依然是串行的</strong>；</li>
<li>这样多个请求可以分配到不同连接中同时跑，但依然浪费资源。、</li>
</ul>
<h5 id="HTTP2为什么可以解决"><a href="#HTTP2为什么可以解决" class="headerlink" title="HTTP2为什么可以解决"></a>HTTP2为什么可以解决</h5><p>HTTP&#x2F;2 把这种「一根吸管排队」的模式，变成了「一根多通道吸管」：</p>
<ul>
<li>同一个连接里能并行发多个请求；</li>
<li>每个请求分配一个独立的流（Stream ID）；</li>
<li>互不影响，从根本上解决了应用层的队头阻塞。</li>
</ul>
<h4 id="HTTP2多路复用的实现原理"><a href="#HTTP2多路复用的实现原理" class="headerlink" title="HTTP2多路复用的实现原理"></a>HTTP2多路复用的实现原理</h4><h5 id="首先HTTP1-1的消息格式是纯文本，太过简单"><a href="#首先HTTP1-1的消息格式是纯文本，太过简单" class="headerlink" title="首先HTTP1.1的消息格式是纯文本，太过简单"></a>首先HTTP1.1的消息格式是纯文本，太过简单</h5><p><img src="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761190756619-2b4e761a-750f-4ca0-a08c-0fc538c7e079.png"></p>
<p> 这一串要完整传完、解析完，服务器才能处理。<br>所以——<strong>一个连接里不能同时传两个请求。</strong></p>
<p>HTTP&#x2F;2 的核心改进是：</p>
<p><strong>在 TCP 之上，引入一层 二进制分帧层（Binary Framing Layer）。</strong></p>
<h5 id="HTTP-2-的实现核心：二进制分帧-流（Stream）"><a href="#HTTP-2-的实现核心：二进制分帧-流（Stream）" class="headerlink" title="HTTP&#x2F;2 的实现核心：二进制分帧 + 流（Stream）"></a>HTTP&#x2F;2 的实现核心：二进制分帧 + 流（Stream）</h5><p>HTTP&#x2F;2 把通信过程切分成很多“帧（Frame）”：</p>
<ul>
<li>每个帧是最小的传输单位；</li>
<li>每个帧都包含一个 <strong>Stream ID（流 ID）</strong>；</li>
<li><strong>每个流代表一个独立的 HTTP 请求&#x2F;响应，一个流对应多个帧。</strong></li>
</ul>
<p>例如， 浏览器要发三个请求：  </p>
<p>Stream 1 -&gt; index.html</p>
<p>Stream 3 -&gt; style.css</p>
<p>Stream 5 -&gt; app.js</p>
<p>** HTTP&#x2F;2 会把它们的数据都拆成帧：  A1, B1, C1, A2, B2, C2 …  并在同一个 TCP 连接中交错发送。  **</p>
<h5 id="HTTP2提供的其他功能"><a href="#HTTP2提供的其他功能" class="headerlink" title="HTTP2提供的其他功能"></a>HTTP2提供的其他功能</h5><p>HTTP&#x2F;2 还提供了：</p>
<ul>
<li><strong>Stream 优先级（Priority）</strong>：告诉服务端哪个请求更重要；</li>
<li><strong>流量控制（Flow Control）</strong>：防止某个流独占带宽（用 WINDOW_UPDATE 帧调节）。</li>
</ul>
<h3 id="二级分帧"><a href="#二级分帧" class="headerlink" title="二级分帧"></a>二级分帧</h3><h4 id="为什么要引入二进制分帧"><a href="#为什么要引入二进制分帧" class="headerlink" title="为什么要引入二进制分帧"></a>为什么要引入二进制分帧</h4><p>在 HTTP&#x2F;1.1 中：</p>
<ul>
<li>所有数据（包括头、体）都是<strong>纯文本格式</strong>；</li>
<li>解析要靠换行符、空格等标识；</li>
<li>对计算机来说效率很低，也不容易并行。</li>
</ul>
<p>HTTP&#x2F;2 想要实现「多路复用」，就必须让通信内容能被精确地<strong>分割、标识、交错、重组</strong>。所以，它放弃文本格式，引入了一个新的层 ——👉 <strong>二进制分帧层（Binary Framing Layer）</strong>。</p>
<h4 id="它在协议中的位置"><a href="#它在协议中的位置" class="headerlink" title="它在协议中的位置"></a>它在协议中的位置</h4><p><img src="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761202712642-98a3794b-5aab-4f7f-b00d-df92489ae964.png"></p>
<h4 id="帧是什么？"><a href="#帧是什么？" class="headerlink" title="帧是什么？"></a>帧是什么？</h4><p>HTTP&#x2F;2 规定，所有通信都是通过“帧”进行的。帧是 HTTP&#x2F;2 中<strong>最小的通信单位</strong>。一个帧大致结构如下：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761202772923-31c6e43c-517e-4d62-bde0-a462f7a8c665.png"></p>
<p>说明：</p>
<ul>
<li><strong>Length</strong>：帧体的字节长度；</li>
<li><strong>Type</strong>：帧类型（HEADERS、DATA、SETTINGS 等）；</li>
<li><strong>Flags</strong>：标志位（例如 END_HEADERS、END_STREAM）；</li>
<li><strong>Stream ID</strong>：表示此帧属于哪个流；</li>
<li><strong>Payload</strong>：真正的数据内容</li>
</ul>
<p> HTTP&#x2F;2 在传输过程中会将请求拆分为多条帧进行发送，服务端接收后再根据帧的标识（Stream ID）将这些帧重新组合，还原为<font style="background-color:#CEF5F7;">完整的 HTTP 消息</font>（包含请求头和请求体）。  </p>
<h3 id="头部压缩"><a href="#头部压缩" class="headerlink" title="头部压缩"></a>头部压缩</h3><h4 id="为什么要压缩头部"><a href="#为什么要压缩头部" class="headerlink" title="为什么要压缩头部"></a>为什么要压缩头部</h4><p> 在 HTTP&#x2F;1.1 中，每个请求都会重复携带大量相同的头部字段，例如：  </p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761203086685-34f10817-2306-476f-bcd2-bd62e98f262e.png"></p>
<p>可以看到:</p>
<ul>
<li>这些头部几乎都一样；</li>
<li>只改变了很少的字段；</li>
<li>但每次都要全部发送，<strong>浪费带宽</strong>；</li>
<li>而且头部是文本格式，解析开销也大。</li>
</ul>
<p>所以 HTTP&#x2F;2 希望——只发变化的部分，重复的内容能被缓存或压缩。</p>
<h4 id="HPACK是怎么压缩的"><a href="#HPACK是怎么压缩的" class="headerlink" title="HPACK是怎么压缩的"></a>HPACK是怎么压缩的</h4><p> HTTP&#x2F;2 定义了一个专门的压缩算法 —— <strong>HPACK</strong>，它通过两种方式减少头部体积：</p>
<h5 id="静态表"><a href="#静态表" class="headerlink" title="静态表"></a>静态表</h5><p> 协议内置一个常见头部字段表，例如：    </p>
<table>
<thead>
<tr>
<th>索引</th>
<th>Header 字段</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>:method</td>
<td>GET</td>
</tr>
<tr>
<td>2</td>
<td>:method</td>
<td>POST</td>
</tr>
<tr>
<td>3</td>
<td>:path</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>8</td>
<td>:status</td>
<td>200</td>
</tr>
<tr>
<td>33</td>
<td>user-agent</td>
<td></td>
</tr>
<tr>
<td>36</td>
<td>accept-encoding</td>
<td>gzip, deflate</td>
</tr>
</tbody></table>
<p> 客户端或服务端只需要发送（索引即可）：  </p>
<p>10000010</p>
<p>↑</p>
<p>│</p>
<p>└── 表示 “我引用了静态表中的第 2 项（:method GET）”</p>
<br/>

<p> 这样就不用传“GET”“:path”“user-agent”这些文字。  </p>
<h5 id="动态表"><a href="#动态表" class="headerlink" title="动态表"></a>动态表</h5><ul>
<li>通信双方可以在运行时维护一张“记忆表”；</li>
<li>每出现一个新的头部字段，就存进去；</li>
<li>之后再发送相同字段时，只需引用它的索引；</li>
<li>动态表是双向同步的（客户端和服务端共享状态）。</li>
</ul>
<p>所以静态表就是提前定义的，提供常见的固定头部字段索引，动态表就是通信过程中双方共同维护的，记录通信过程中出现的新头部字段</p>
<h3 id="服务器推送（很鸡肋，默认关闭）"><a href="#服务器推送（很鸡肋，默认关闭）" class="headerlink" title="服务器推送（很鸡肋，默认关闭）"></a>服务器推送（很鸡肋，默认关闭）</h3><p> 需要注意的是，HTTP&#x2F;2 的服务器推送是一个比较鸡肋的功能，在<font style="color:#DF2A3F;"> HTTP&#x2F;3 中已经被废弃</font>；而且像 Nginx、Cloudflare 等多数网关默认都关闭了这一特性。  </p>
<h4 id="什么是服务推送"><a href="#什么是服务推送" class="headerlink" title="什么是服务推送"></a>什么是服务推送</h4><p> 在 HTTP&#x2F;1.1 中，通信是严格的 <strong>请求 → 响应</strong> 模式：  浏览器必须先发送请求，服务器才能返回数据</p>
<p>而在HTTP&#x2F;2中，服务器可以主动推送某些资源给客户端，即使客户端还没请求它们</p>
<p><strong>举个例子</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761203914100-35225b1c-4226-4aad-acd5-2cb604cef39d.png"></p>
<h4 id="怎么实现推送的"><a href="#怎么实现推送的" class="headerlink" title="怎么实现推送的"></a>怎么实现推送的</h4><p> HTTP&#x2F;2 使用三种帧实现推送机制：  </p>
<table>
<thead>
<tr>
<th>帧类型</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>PUSH_PROMISE</strong></td>
<td>告诉客户端：“我准备推送这个资源”</td>
</tr>
<tr>
<td><strong>HEADERS</strong></td>
<td>推送资源的响应头</td>
</tr>
<tr>
<td><strong>DATA</strong></td>
<td>推送资源的实际内容</td>
</tr>
</tbody></table>
<p> 推送的资源会有自己的 <strong>Stream ID</strong>（流编号），<br>例如：  </p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/50543647/1761203963602-15e3c956-eef4-4eba-bbbf-32563e0c123f.png"></p>
<p> 这些流都在同一个 TCP 连接中多路复用。  </p>
<h4 id="客户端依然具有控制权"><a href="#客户端依然具有控制权" class="headerlink" title="客户端依然具有控制权"></a>客户端依然具有控制权</h4><p>客户端可以：</p>
<ul>
<li>通过 <code>SETTINGS_ENABLE_PUSH = 0</code> 禁用推送；</li>
<li>收到 <code>PUSH_PROMISE</code> 后，若已缓存该资源，可发送 <code>RST_STREAM</code> 拒收；</li>
<li>推送的内容仍然受缓存、同源策略、优先级控制。</li>
</ul>
<h4 id="很鸡肋，HTTP-3已经废弃"><a href="#很鸡肋，HTTP-3已经废弃" class="headerlink" title="很鸡肋，HTTP&#x2F;3已经废弃"></a>很鸡肋，HTTP&#x2F;3已经废弃</h4><p>因为：</p>
<ul>
<li>推送不好管理（容易推多或推错资源）；</li>
<li><strong><font style="color:#DF2A3F;">推送的东西如果浏览器并不需要，会造成资源浪费</font></strong></li>
<li>浏览器缓存、优先级机制复杂；</li>
<li>QUIC&#x2F;HTTP&#x2F;3 更推荐使用 <strong>“103 Early Hints” + preload header”</strong>。</li>
</ul>
<h3 id="单连接复用"><a href="#单连接复用" class="headerlink" title="单连接复用"></a>单连接复用</h3><p> HTTP&#x2F;2 的单连接复用机制就是通过“多路复用（Multiplexing）”实现的。  </p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/11/25/%E7%BD%91%E7%BB%9C/%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%8F%AF%E4%BB%A5%E5%BB%BA%E7%AB%8B%E5%A4%9A%E5%B0%91%E4%B8%AA%E8%BF%9E%E6%8E%A5/" rel="prev" title="一个进程可以建立多少个连接">
                  <i class="fa fa-angle-left"></i> 一个进程可以建立多少个连接
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/11/25/%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/HTTP_2_%E4%B8%8EHTTP_3/" rel="next" title="HTTP 2 与HTTP 3">
                  HTTP 2 与HTTP 3 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">刘翰霖</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
